{{- with .Params.banner -}}

  {{/* Try to get banner as page resource */}}
  {{- $src := printf "%s" . -}}
  {{- with $.Resources.GetMatch $src -}}

    {{- partial "banner-figure" . }}

  {{- else -}}

    {{/* Or try get parent banner as fallback */}}
    {{- with $.Parent -}}
      {{- partial "banner" . -}}
    {{- end -}}

  {{- end -}}

{{- else -}}

  {{/* If banner not explicitly deactivated on page (banner: `false` on front matter) */}}
  {{- if not (eq .Params.banner false) -}}

    {{/* Try to get the default banner resource */}}
    {{- $src := $.Site.Params.banner | default "banner.*" -}}
    {{- with $.Resources.GetMatch $src -}}

      {{- partial "banner-figure" . }}

    {{- else -}}

      {{/* Or try get parent banner as fallback */}}
      {{- with .Parent -}}
        {{- partial "banner" . -}}
      {{- end -}}

    {{- end -}}

  {{- end -}}

{{- end -}}
