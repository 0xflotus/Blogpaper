<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta http-equiv="x-ua-Compatible" content="ie=edge">

  <title>
  {{- block "title" . -}}
    {{- with .Title -}}{{- . }} | {{ end -}}
    {{- .Site.Title -}}
  {{- end -}}
  </title>

  {{- with .Description }}
  <meta name="description" content="{{ . }}">
  {{- else -}}
  {{- with .Site.Params.description }}
  <meta name="description" content="{{ . }}">
  {{- end -}}
  {{- end }}

  {{- range .AlternativeOutputFormats }}
  <link rel="{{ .Rel }}" type="{{ .MediaType.Type }}" href="{{ .RelPermalink }}" title="{{ $.Site.Title | safeHTML }}">
  {{- end }}

  {{/* Gets normalize.css and blogpaper.css first */}}
  {{- $css_files := slice -}}
  {{- $css_filepaths := slice "css/normalize.css/normalize.css" "css/blogpaper.css" -}}
  {{- range $css_filepaths -}}
    {{- $css_files = $css_files | append (resources.Get .) -}}
  {{- end -}}

  {{/* Appends CSS of the user */}}
  {{- $user_css := where (resources.Match "**.css") ".Name" "not in" $css_filepaths -}}
  {{- range $user_css -}}
    {{- $css_files = $css_files | append . -}}
  {{- end -}}

  {{/* Concat and link all CSS files */}}
  {{- $css := $css_files | resources.Concat "main.css" | minify | fingerprint "sha512" -}}
  <link rel="stylesheet" href="{{ $css.RelPermalink }}" integrity="{{ $css.Data.Integrity }}">
</head>
