<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta http-equiv="x-ua-Compatible" content="ie=edge">

  <title>
  {{- block "title" . -}}
    {{- with .Title -}}{{- . }} | {{ end -}}
    {{- .Site.Title -}}
  {{- end -}}
  </title>

  {{- with .Description }}
  <meta name="description" content="{{ . }}">
  {{- else -}}
  {{- with .Site.Params.description }}
  <meta name="description" content="{{ . }}">
  {{- end -}}
  {{- end }}

  {{- range .AlternativeOutputFormats }}
  <link rel="{{ .Rel }}" type="{{ .MediaType.Type }}" href="{{ .RelPermalink }}" title="{{ $.Site.Title | safeHTML }}">
  {{- end }}

  {{/* Get normalize.css and blogpaper.scss first */}}
  {{- $normalize_css := resources.Get "css/normalize.css/normalize.css" | minify -}}

  {{- $scss_options := (dict "outputStyle" "compressed") -}}
  {{- $blogpaper_css := resources.Get "css/blogpaper.scss" | resources.ExecuteAsTemplate "blogpaper.scss" . | toCSS $scss_options -}}

  {{- $css_files := slice $normalize_css $blogpaper_css -}}

  {{/* Add custom CSS files */}}
  {{- range resources.Match "**.css" -}}
    {{- if not (in .Name "normalize.css") -}}
      {{- $css := . | minify -}}
      {{- $css_files = $css_files | append $css -}}
    {{- end -}}
  {{- end -}}

  {{/* Add custom SCSS files */}}
  {{- range resources.Match "**.scss" -}}
    {{- if not (in .Name "blogpaper.scss") -}}
      {{- $css := . | resources.ExecuteAsTemplate .Name . | toCSS $scss_options -}}
      {{- $css_files = $css_files | append $css -}}
    {{- end -}}
  {{- end -}}

  {{- $css := $css_files | resources.Concat "main.css" | fingerprint -}}
  <link rel="stylesheet" href="{{ $css.RelPermalink }}" integrity="{{ $css.Data.Integrity }}">
</head>
